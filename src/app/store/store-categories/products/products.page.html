<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home/tabs/categories"></ion-back-button>
    </ion-buttons>
    <ion-title>{{pageTitle}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="storeSubCategories?.length > 0 " class="segmentDiv">
    <ion-segment scrollable (ionChange)="segmentChanged($event)" [(ngModel)]="pet">
      <ion-segment-button class="segmentButton" value="0">
        <ion-text>All</ion-text>
      </ion-segment-button>
      <ion-segment-button class="segmentButton" *ngFor="let subcategory of storeSubCategories" value="{{subcategory?.category_id}}">
        <ion-text>{{subcategory?.name}}</ion-text>
      </ion-segment-button>
    </ion-segment>
  </div>
  <div style="height:78% !important">
    <div *ngIf="!storeProducts1?.length && !isLoading" class="outer_empty_cart_wrap">
      <div class="innerCartWrap">
        <!-- <ion-icon name="albums"></ion-icon> -->
        <span style="color:#b61671">No Products Found!</span>
      </div>
    </div>
    <ion-grid>
      <ion-row>
        <ion-col size-md="8" offset-md="2" text-center *ngIf="isLoading">
          <ion-spinner color="primary"></ion-spinner>
        </ion-col>
        <ion-col size="12" size-sm="8" offset-sm="2" text-center>
          <div *ngIf="storeProducts1?.length > 0">
            <ion-list>
              <ion-item *ngFor="let product of storeProducts1">
                <ion-thumbnail class="thumbWrap" slot="start">
                  <span *ngIf="product?.store_discount > 0" class="discount_logo">
                    {{ product?.store_discount | number : '1.0-0' }}%
                    <br>OFF
                  </span>
                  <ion-img *ngIf="product?.image_url" [src]="product?.image_url"></ion-img>
                  <ion-img *ngIf="!product?.image_url" src="assets/images/default_image.jpg"></ion-img>
                </ion-thumbnail>
                <ion-label>
                  <h2>{{product?.product_name}}</h2>
                  <p style="font-weight:bold;">{{product?.weight + ' ' + product?.weight_text }}</p>
                  <p>MRP:
                    <del> &#8377; {{product?.product_marked_price }} </del>
                  </p>
                  <p>
                    <span style="font-weight:bold;"> &#8377; {{product?.store_selling_price }} </span>
                    <button *ngIf="!product?.added" class="addButton" (click)="addProduct(product)">
                      <span style="color: #fff;"> ADD</span>
                    </button>

                    <span *ngIf="product?.added" style="width: 120px;height: 35px;float:right;color:white">
                      <span *ngIf="product?.added" (click)="removeItemfromCart(product)" style="width:45px;background-color:#8fc951;
                                        line-height: 35px;text-align:center;display: inline-block;height: 35px;font-size:1.2em;">
                        -
                      </span>
                      <span *ngIf="product?.quantity_added > 0 && product?.added" style="width:30px;background-color:#8fc951;
                                      line-height: 35px;text-align:center;display: inline-block;
                                             height: 35px;font-size:1.2em;">
                        {{product?.quantity_added}}
                      </span>
                      <span *ngIf="product?.added" style="width:45px;background-color:#8fc951;
                                      line-height: 35px;text-align:center;display: inline-block;
                                             height: 35px;font-size:1.2em;" (click)="addtocart(product);">
                        +
                      </span>
                    </span>
                  </p>
                </ion-label>
              </ion-item>

            </ion-list>
          </div>
        </ion-col>
      </ion-row>

    </ion-grid>
  </div>
</ion-content>

<ion-footer *ngIf="cartList?.length" class="footer_color">
  <ion-row>
    <ion-col size="6">
      <ion-button expand="full" (click)="viewCart()" fill="clear" style="color:#fff !important">
        {{cartList[0]?.store_name}} - {{cartList?.length}} Items
      </ion-button>
    </ion-col>

    <ion-col size="6">
      <ion-button expand="full" (click)="viewCart()" fill="clear" style="color:#fff !important">
        View Basket
        <ion-icon name="cart"></ion-icon>
      </ion-button>
    </ion-col>
  </ion-row>
</ion-footer>